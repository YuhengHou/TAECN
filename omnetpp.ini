[General]
network = src.TAECN
description = "TA-ECN High-Load Comparison"
sim-time-limit = 5s
record-eventlog = false
output-scalar-file = results/General-0.sca

# === Global recording and link settings ===
**.numHosts = 16
**.numLeafs = 2
**.numSpines = 2
**.datarate = 10Gbps
**.linkDelay = 5us
**.bufferSize = 100pkts
**.queueType = "REDQueue"
**.recordStats = true
**.recordVectors = true
**.ppp[*].queue.recordStats = true
**.ppp[*].queue.recordVectors = true
**.queue.recordStats = true
**.queue.recordVectors = true
**.queue.queueLength.result-recording-modes = all
**.queue.queueingTime.result-recording-modes = all

# --- Half hosts act as clients, half as servers ---
**.hasTcp = true
**.hasUdp = false

*.hosts[*].numApps = 1
*.hosts[0..7].app[0].typename = "TcpBasicClientApp"
*.hosts[0..7].app[0].connectAddress = ${"host[" + str(index + 8) + "]"}
*.hosts[0..7].app[0].connectPort = 80
*.hosts[0..7].app[0].tOpen = 0s
*.hosts[0..7].app[0].tClose = 5s
*.hosts[0..7].app[0].sendBytes = 100MiB
*.hosts[0..7].app[0].thinkTime = 0s

*.hosts[8..15].app[0].typename = "TcpGenericServerApp"
*.hosts[8..15].app[0].localPort = 80

# =================================================
#  CONFIGURATIONS
# =================================================

[Config HighloadBaseline]
extends = General
description = "High-load baseline with fixed ECN threshold"
**.queue.markingScheme = "dctcp"
**.queue.ecnThreshold = 60pkts
**.adaptive = false
output-vector-file = results/HighloadBaseline.vec

[Config HighloadAdaptive]
extends = General
description = "High-load TA-ECN with adaptive thresholding"
**.queue.markingScheme = "taecn"
**.adaptive = true
output-vector-file = results/HighloadAdaptive.vec
